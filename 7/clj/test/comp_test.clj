(ns comp-test (:require [comp :refer [run-sync amplify-signal get-max-signal]]
                        [clojure.test :refer :all]))

(deftest day5
  (is (= (run-sync [3 9 8 9 10 9 4 9 99 -1 8] [8]) [1]))
  (is (= (run-sync [3 9 8 9 10 9 4 9 99 -1 8] [7]) [0]))
  (is (= (run-sync [3,9,7,9,10,9,4,9,99,-1,8] [7]) [1]))
  (is (= (run-sync [3,9,7,9,10,9,4,9,99,-1,8] [9]) [0]))
  (is (= (run-sync [3,3,1108,-1,8,3,4,3,99] [8]) [1]))
  (is (= (run-sync [3,12,6,12,15,1,13,14,13,4,13,99,-1,0,1,9] [8]) [1]))
  (is (= (run-sync [3,12,6,12,15,1,13,14,13,4,13,99,-1,0,1,9] [0]) [0]))
  (is (= (run-sync [3,3,1105,-1,9,1101,0,0,12,4,12,99,1] [8]) [1])))

(deftest day-5-big-example
  (is (= (run-sync [3,21,1008,21,8,20,1005,20,22,107,8,21,20,1006,20,31
                    1106,0,36,98,0,0,1002,21,125,20,4,20,1105,1,46,104
                    999,1105,1,46,1101,1000,1,20,4,20,1105,1,46,98,99] [9]) [1001]))
  (is (= (run-sync [3,21,1008,21,8,20,1005,20,22,107,8,21,20,1006,20,31
                    1106,0,36,98,0,0,1002,21,125,20,4,20,1105,1,46,104
                    999,1105,1,46,1101,1000,1,20,4,20,1105,1,46,98,99] [7]) [999]))
  (is (= (run-sync [3,21,1008,21,8,20,1005,20,22,107,8,21,20,1006,20,31
                    1106,0,36,98,0,0,1002,21,125,20,4,20,1105,1,46,104
                    999,1105,1,46,1101,1000,1,20,4,20,1105,1,46,98,99] [8]) [1000])))

(deftest day-7
  (is (= (amplify-signal [3,15,3,16,1002,16,10,16,1,16,15,15,4,15,99,0,0] [4 3 2 1 0])
         43210))
  (is (= (amplify-signal [3,23,3,24,1002,24,10,24,1002,23,-1,23
                          101,5,23,23,1,24,23,23,4,23,99,0,0] [0,1,2,3,4])
         54321))
  (is (= (get-max-signal [3,31,3,32,1002,32,10,32,1001,31,-2,31,1007,31,0,33
                          1002,33,7,33,1,33,31,31,1,32,31,31,4,31,99,0,0,0])
         65210)))
